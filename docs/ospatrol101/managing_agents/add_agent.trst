.. _add_agent_with_manage_agents:



Creating the key on the server:
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

* On the server run ``/var/ospatrol/bin/manage_agents``. Notice the options provided by this application. We will be choosing ``a`` to add an agent.

.. image:: images/0_server_manage_agents.png
   :align: center
   :alt: manage agents

* After selecting ``a`` we have to enter information about the agent. All of these items must be unique. Multiple agents using a single ID, IP, or hostname can cause i
ssues.

  * The agent name does not have to be the hostname, but using the hostname may help with managing the agents.
  * The IP address can be the actual IP address, a CIDR address (192.168.1.0/24), or ``any``. It is best to be as specific as possible, but monitoring VPN or DHCP user
s is sometimes necessary. CIDR addresses and ``any`` do not have to be unique.
  * The ID will be used for a number of OSPatrol functions. Finding the ID is easy, so I typically choose the default.

.. image:: images/1_server_manage_agents.png
   :align: center
   :alt: enter information about the agent

* After confirming that the agent should be created and the information is correct, you will be presented with the original menu again. This time use ``L`` to list the
 agents. Notice there is only 1 agent on this system. The list can get much larger, some people reportedly having over 1,000 agents on a single server.

.. image:: images/2_server_manage_agents.png
   :align: center
   :alt: agent list



